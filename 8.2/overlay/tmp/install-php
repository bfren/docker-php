#!/usr/bin/nu

use bf

# Install PHP $version
def main [
    version: string
] {
    # install packages
    bf pkg install [
        $"php82=($version)"
        $"php82-common=($version)"
    ]

    # create symlinks so PHP can be called on the commandline using php and php-fpm
    let php = "/usr/bin/php"
    let fpm = "/usr/sbin/php-fpm"
    if ($php | path type) != "symlink" { ^ln -sf /usr/bin/php82 $php }
    if ($fpm | path type) != "symlink" { ^ln -sf /usr/sbin/php-fpm82 $fpm }
}
